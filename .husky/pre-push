#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Function to check if Docker is running and start it if not
start_docker() {
  for i in {1..3}; do
    if ! winpty docker info > /dev/null 2>&1; then
      echo "Attempting to start Docker... (Attempt $i)"
      # Add your command to start Docker here
      # For example: "start /B C:\path\to\Docker\Docker.exe" for Docker Desktop
      sleep 10
    else
      echo "Docker is running."
      return
    fi
  done
  echo "Failed to start Docker after 3 attempts."
  exit 1
}

# Check if Docker is running
start_docker

# Run Docker-based component tests before pushing the code
npm run docker:build:run-ct-test
